[{"derived_key":"pt_is_counter","deterministic_formula":"pt_is_counter = true if 'counter' in clause else false","inputs":"oracle_clause_contains('counter')","output_enum":"true/false","why":"Prevents counter/non-counter conflation"},{"derived_key":"symmetry_profile","deterministic_formula":"ASYMMETRIC if SELF_ONLY; SYMMETRIC if EACH_PLAYER; OPPONENT_WEIGHTED if EACH_OPPONENT/OPPONENT_ONLY","inputs":"ownership_scope + controller_scope","output_enum":"ASYMMETRIC|SYMMETRIC|OPPONENT_WEIGHTED","why":"Scores stax/pillowfort correctly"},{"derived_key":"effect_layer_hint","deterministic_formula":"If primitive in {PT_SET_BASE} => PT_SET; if in {STATIC_RULE_*} => RULE_MOD; if in {THEFT_CONTROL_CHANGE} => CONTROL_CHANGE","inputs":"primitive_id set","output_enum":"TYPE_CHANGE|ABILITY_REMOVE|PT_SET|CONTROL_CHANGE|RULE_MOD|NONE","why":"Preps for layer/lock reasoning"},{"derived_key":"cast_mode","deterministic_formula":"If 'evoke/overload/escape/...' => ALTERNATE_COST; if 'without paying' => WITHOUT_PAYING_MANA_COST; if 'you may cast ... without paying' with condition => CONDITIONAL_FREE","inputs":"presence of keywords/phrases","output_enum":"NORMAL|ALTERNATE_COST|WITHOUT_PAYING_MANA_COST|CONDITIONAL_FREE","why":"Cast triggers count; scoring turbo windows"}]