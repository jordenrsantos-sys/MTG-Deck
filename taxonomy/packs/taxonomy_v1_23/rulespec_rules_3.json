[{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.85","enabled":"true","explanation":"Detect cast-trigger payoffs (generic).","facet_key":"cast_trigger_payoff","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"\\b(whenever|when)\\b you cast (a|an|one or more|an instant or sorcery spell|a spell)","priority":"50","rule_id":"RS_CAST_TRIGGER_GENERIC","unknown_if_ambiguous":"true"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.8","enabled":"true","explanation":"Primitive for cast-trigger payoff (ensure exact primitive_id).","match_scope":"oracle_text","match_type":"REGEX","pattern":"\\b(whenever|when)\\b you cast (a|an|one or more|an instant or sorcery spell|a spell)","primitive_id":"CAST_TRIGGER_PAYOFF","priority":"55","rule_id":"RS_CAST_TRIGGER_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.75","enabled":"true","explanation":"Marks instant/sorcery relevance for spellslinger engines.","facet_key":"instant_sorcery_matters","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"\\binstant or sorcery\\b","priority":"60","rule_id":"RS_INST_SORC_MATTERS_FACET","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Magecraft-like trigger detected.","facet_key":"magecraft_like","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"\\b(whenever|when)\\b you cast or copy an instant or sorcery spell","priority":"70","rule_id":"RS_MAGECRAFT_LIKE","unknown_if_ambiguous":"false"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.85","enabled":"true","explanation":"Primitive for magecraft-style trigger (ensure primitive_id exists).","match_scope":"oracle_text","match_type":"REGEX","pattern":"\\b(whenever|when)\\b you cast or copy an instant or sorcery spell","primitive_id":"MAGECRAFT_TRIGGER","priority":"71","rule_id":"RS_MAGECRAFT_LIKE_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Copy target instant/sorcery spell.","facet_key":"spell_copy","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"copy target (instant|sorcery) spell","priority":"100","rule_id":"RS_COPY_TARGET_INSTANT_SORC","unknown_if_ambiguous":"false"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Copy target spell (generic).","facet_key":"spell_copy","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"copy target spell","priority":"101","rule_id":"RS_COPY_TARGET_SPELL","unknown_if_ambiguous":"true"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.85","enabled":"true","explanation":"Primitive: spell copy (ensure exact primitive_id).","match_scope":"oracle_text","match_type":"REGEX","pattern":"copy target (instant|sorcery) spell|copy target spell","primitive_id":"SPELL_COPY","priority":"102","rule_id":"RS_SPELL_COPY_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Storm keyword detected.","facet_key":"storm_like","facet_value":"true","match_scope":"oracle_text","match_type":"CONTAINS","pattern":"Storm","priority":"130","rule_id":"RS_STORM_KEYWORD","unknown_if_ambiguous":"false"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Primitive: storm (ensure exact primitive_id).","match_scope":"oracle_text","match_type":"CONTAINS","pattern":"Storm","primitive_id":"STORM","priority":"131","rule_id":"RS_STORM_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.7","enabled":"true","explanation":"Cast-count scaling often behaves storm-like; mark storm_like with review.","facet_key":"storm_like","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"for each spell cast( this turn)?","priority":"140","rule_id":"RS_CAST_COUNT_SCALING","unknown_if_ambiguous":"true"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.65","enabled":"true","explanation":"Primitive: cast-count scaling (ensure primitive_id exists).","match_scope":"oracle_text","match_type":"REGEX","pattern":"for each spell cast( this turn)?","primitive_id":"CAST_COUNT_SCALING","priority":"141","rule_id":"RS_CAST_COUNT_SCALING_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.85","enabled":"true","explanation":"Impulse draw: exile then may play/cast.","facet_key":"impulse_draw","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"exile the top (card|\\\\d+ cards|two cards|three cards|four cards) of your library.*you may (play|cast) (that card|those cards)","priority":"200","rule_id":"RS_IMPULSE_DRAW_EXILE_THEN_PLAY","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.75","enabled":"true","explanation":"Explicit play/cast from exile permission.","facet_key":"play_from_exile","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"you may (play|cast) (that card|those cards) (for as long as they remain exiled|until end of turn|until the end of your next turn|until your next turn|until the end of your next turn)","priority":"201","rule_id":"RS_PLAY_FROM_EXILE_FACET","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.6","enabled":"true","explanation":"Impulse window until end of turn (context dependent).","facet_key":"impulse_window","facet_value":"UNTIL_EOT","match_scope":"oracle_text","match_type":"CONTAINS","notes":"Low confidence; many effects use this phrase. Consider tightening later.","pattern":"until end of turn","priority":"210","rule_id":"RS_IMPULSE_WINDOW_EOT","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.7","enabled":"true","explanation":"Impulse window until your next turn (context dependent).","facet_key":"impulse_window","facet_value":"UNTIL_YOUR_NEXT_TURN","match_scope":"oracle_text","match_type":"CONTAINS","pattern":"until your next turn","priority":"211","rule_id":"RS_IMPULSE_WINDOW_YOUR_NEXT_TURN","unknown_if_ambiguous":"true"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.75","enabled":"true","explanation":"Primitive: impulse draw (ensure exact primitive_id).","match_scope":"oracle_text","match_type":"REGEX","pattern":"exile the top (card|\\\\d+ cards|two cards|three cards|four cards) of your library.*you may (play|cast)","primitive_id":"IMPULSE_DRAW","priority":"220","rule_id":"RS_IMPULSE_DRAW_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"General cost reduction for spells.","facet_key":"cost_reduction","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"spells you cast cost \\\\d+ less to cast","priority":"260","rule_id":"RS_SPELLS_COST_LESS","unknown_if_ambiguous":"false"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Cost reduction for instants/sorceries.","facet_key":"cost_reduction","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"instant and sorcery spells you cast cost \\\\d+ less to cast","priority":"261","rule_id":"RS_INST_SORC_COST_LESS","unknown_if_ambiguous":"false"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Cost reduction scope = instant/sorcery.","facet_key":"cost_reduction_scope","facet_value":"INSTANT_SORCERY","match_scope":"oracle_text","match_type":"REGEX","pattern":"instant and sorcery spells you cast cost \\\\d+ less to cast","priority":"262","rule_id":"RS_COST_REDUCTION_SCOPE_INST_SORC","unknown_if_ambiguous":"false"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.85","enabled":"true","explanation":"Primitive: cost reduction (ensure primitive_id exists).","match_scope":"oracle_text","match_type":"REGEX","pattern":"(spells you cast cost \\\\d+ less to cast|instant and sorcery spells you cast cost \\\\d+ less to cast)","primitive_id":"COST_REDUCTION","priority":"263","rule_id":"RS_COST_REDUCTION_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.55","enabled":"true","explanation":"Burst mana marker; many add-mana effects aren't rituals -> review.","facet_key":"mana_ritual","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","notes":"Later refine to 'add {R}{R}{R}' etc on instants/sorceries.","pattern":"add (\\\\{[WUBRGCE]\\\\}|\\\\d+)","priority":"300","rule_id":"RS_ADD_MANA_RITUAL","unknown_if_ambiguous":"true"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.5","enabled":"true","explanation":"Primitive: burst mana/ritual (placeholder; refine).","match_scope":"oracle_text","match_type":"REGEX","pattern":"add (\\\\{[WUBRGCE]\\\\}|\\\\d+)","primitive_id":"MANA_BURST","priority":"301","rule_id":"RS_MANA_RITUAL_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.75","enabled":"true","explanation":"Wheel-like discard then draw patterns.","facet_key":"wheel_effect","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"each player (discards|wheels).*then draws|each player discards.*draws","priority":"340","rule_id":"RS_WHEEL_EFFECT_FACET","unknown_if_ambiguous":"true"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.7","enabled":"true","explanation":"Primitive: wheel effect (ensure primitive_id exists).","match_scope":"oracle_text","match_type":"REGEX","pattern":"each player (discards|wheels).*then draws|each player discards.*draws","primitive_id":"WHEEL_EFFECT","priority":"341","rule_id":"RS_WHEEL_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.85","enabled":"true","explanation":"Tutor-to-top pattern.","facet_key":"tutor_to_top","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"search your library for .* put (it|that card) on top of your library","priority":"380","rule_id":"RS_TUTOR_TO_TOP","unknown_if_ambiguous":"true"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.8","enabled":"true","explanation":"Primitive: tutor-to-top (ensure primitive_id exists).","match_scope":"oracle_text","match_type":"REGEX","pattern":"search your library for .* put (it|that card) on top of your library","primitive_id":"TUTOR_TO_TOP","priority":"381","rule_id":"RS_TUTOR_TO_TOP_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Additional upkeep step.","facet_key":"extra_upkeep","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"you get an additional upkeep step","priority":"420","rule_id":"RS_EXTRA_UPKEEP_FACET","unknown_if_ambiguous":"false"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Primitive: extra upkeep (ensure primitive_id exists).","match_scope":"oracle_text","match_type":"REGEX","pattern":"you get an additional upkeep step","primitive_id":"EXTRA_UPKEEP","priority":"421","rule_id":"RS_EXTRA_UPKEEP_TAG","unknown_if_ambiguous":"true"}]