[{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.85","enabled":"true","explanation":"Detect ETB trigger templating; used for blink/ETB engines.","facet_key":"has_etb_trigger","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"\\b(when|whenever)\\b.*\\benters the battlefield\\b","priority":"50","rule_id":"RS_ETB_TRIGGER_FACET","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.8","enabled":"true","explanation":"Detect LTB triggers including legacy wording.","facet_key":"has_ltb_trigger","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"\\b(when|whenever)\\b.*\\b(leaves the battlefield|is put into a graveyard from the battlefield)\\b","priority":"55","rule_id":"RS_LTB_TRIGGER_FACET","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Detect dies triggers for aristocrats engines.","facet_key":"has_dies_trigger","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"\\b(when|whenever)\\b.*\\bdies\\b","priority":"60","rule_id":"RS_DIES_TRIGGER_FACET","unknown_if_ambiguous":"false"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.75","enabled":"true","explanation":"ETB-trigger payoff primitive (placeholder; ensure primitive_id exists).","match_scope":"oracle_text","match_type":"REGEX","pattern":"\\b(when|whenever)\\b.*\\benters the battlefield\\b","primitive_id":"ETB_PAYOFF","priority":"70","rule_id":"RS_ETB_PAYOFF_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.8","enabled":"true","explanation":"Dies-trigger payoff primitive (placeholder; ensure primitive_id exists).","match_scope":"oracle_text","match_type":"REGEX","pattern":"\\b(when|whenever)\\b.*\\bdies\\b","primitive_id":"DEATH_PAYOFF","priority":"75","rule_id":"RS_DEATH_PAYOFF_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.85","enabled":"true","explanation":"Detect token creation wording.","facet_key":"creates_tokens","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"\\bcreate\\b.*\\btoken\\b","priority":"100","rule_id":"RS_CREATE_TOKEN_FACET","unknown_if_ambiguous":"true"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.8","enabled":"true","explanation":"Token production primitive (ensure exact primitive_id).","match_scope":"oracle_text","match_type":"REGEX","pattern":"\\bcreate\\b.*\\btoken\\b","primitive_id":"TOKEN_PRODUCTION","priority":"101","rule_id":"RS_CREATE_TOKEN_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Token copy creation: 'create a token that's a copy' pattern.","facet_key":"token_copy","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"\\bcreate\\b.*\\btoken\\b.*\\bthat'?s a copy\\b","priority":"110","rule_id":"RS_TOKEN_COPY_FACET","unknown_if_ambiguous":"false"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.7","enabled":"true","explanation":"Copy effect primitive (ensure exact primitive_id); token_copy facet distinguishes token vs non-token.","match_scope":"oracle_text","match_type":"REGEX","pattern":"\\bcreate\\b.*\\btoken\\b.*\\bthat'?s a copy\\b","primitive_id":"COPY_EFFECT","priority":"111","rule_id":"RS_TOKEN_COPY_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Detect Treasure token creation.","facet_key":"token_creation_kind","facet_value":"TREASURE","match_scope":"oracle_text","match_type":"CONTAINS","pattern":"Treasure token","priority":"120","rule_id":"RS_TOKEN_TREASURE_KIND","unknown_if_ambiguous":"false"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Detect Clue token creation.","facet_key":"token_creation_kind","facet_value":"CLUE","match_scope":"oracle_text","match_type":"CONTAINS","pattern":"Clue token","priority":"121","rule_id":"RS_TOKEN_CLUE_KIND","unknown_if_ambiguous":"false"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Detect Food token creation.","facet_key":"token_creation_kind","facet_value":"FOOD","match_scope":"oracle_text","match_type":"CONTAINS","pattern":"Food token","priority":"122","rule_id":"RS_TOKEN_FOOD_KIND","unknown_if_ambiguous":"false"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Detect Blood token creation.","facet_key":"token_creation_kind","facet_value":"BLOOD","match_scope":"oracle_text","match_type":"CONTAINS","pattern":"Blood token","priority":"123","rule_id":"RS_TOKEN_BLOOD_KIND","unknown_if_ambiguous":"false"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Detect Map token creation.","facet_key":"token_creation_kind","facet_value":"MAP","match_scope":"oracle_text","match_type":"CONTAINS","pattern":"Map token","priority":"124","rule_id":"RS_TOKEN_MAP_KIND","unknown_if_ambiguous":"false"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Detect Powerstone token creation.","facet_key":"token_creation_kind","facet_value":"POWERSTONE","match_scope":"oracle_text","match_type":"CONTAINS","pattern":"Powerstone token","priority":"125","rule_id":"RS_TOKEN_POWERSTONE_KIND","unknown_if_ambiguous":"false"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.6","enabled":"true","explanation":"Replacement effects often use 'instead'; mark as replacement_effect for downstream checks.","facet_key":"replacement_effect","facet_value":"true","match_scope":"oracle_text","match_type":"CONTAINS","notes":"Low confidence; many 'instead' uses aren't replacement effects -> REVIEW/unknown.","pattern":"instead","priority":"150","rule_id":"RS_REPLACEMENT_EFFECT_FACET","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Token doubler replacement effect (Doubling Season/Parallel Lives family).","facet_key":"repl_doubles_tokens","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"If an effect would create one or more tokens.*it creates twice that many","priority":"160","rule_id":"RS_REPL_DOUBLE_TOKENS_FACET","unknown_if_ambiguous":"false"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Replacement token doubling primitive (ensure exact primitive_id).","match_scope":"oracle_text","match_type":"REGEX","pattern":"If an effect would create one or more tokens.*it creates twice that many","primitive_id":"REPLACEMENT_TOKEN_DOUBLING","priority":"161","rule_id":"RS_REPL_DOUBLE_TOKENS_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Counter doubler replacement effect (Doubling Season/Winding Constrictor family).","facet_key":"repl_doubles_counters","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"If an effect would put one or more counters on.*it puts twice that many","priority":"170","rule_id":"RS_REPL_DOUBLE_COUNTERS_FACET","unknown_if_ambiguous":"false"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Replacement counter doubling primitive (ensure exact primitive_id).","match_scope":"oracle_text","match_type":"REGEX","pattern":"If an effect would put one or more counters on.*it puts twice that many","primitive_id":"REPLACEMENT_COUNTER_DOUBLING","priority":"171","rule_id":"RS_REPL_DOUBLE_COUNTERS_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.85","enabled":"true","explanation":"Blink/flicker effect (immediate).","match_scope":"oracle_text","match_type":"REGEX","pattern":"exile (target|up to one|any number of).*then return (it|them) to the battlefield","primitive_id":"BLINK_EFFECT","priority":"200","rule_id":"RS_BLINK_IMMEDIATE","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.85","enabled":"true","explanation":"Blink timing = immediate.","facet_key":"blink_temporal","facet_value":"IMMEDIATE","match_scope":"oracle_text","match_type":"REGEX","pattern":"exile (target|up to one|any number of).*then return (it|them) to the battlefield","priority":"201","rule_id":"RS_BLINK_IMMEDIATE_FACET","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.85","enabled":"true","explanation":"Blink timing = next end step (delayed).","facet_key":"blink_temporal","facet_value":"NEXT_END_STEP","match_scope":"oracle_text","match_type":"REGEX","pattern":"exile (target|up to one|any number of).*return (it|them) to the battlefield.*(at the beginning of the next end step|at the beginning of the end step)","priority":"210","rule_id":"RS_BLINK_NEXT_END_STEP_FACET","unknown_if_ambiguous":"true"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.85","enabled":"true","explanation":"Recursion to hand (ensure primitive_id exists).","match_scope":"oracle_text","match_type":"REGEX","pattern":"return target .* card from (your|a) graveyard to your hand","primitive_id":"GRAVEYARD_RECURSION_TO_HAND","priority":"250","rule_id":"RS_RECUR_TO_HAND","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Recursion destination = hand.","facet_key":"recursion_destination","facet_value":"HAND","match_scope":"oracle_text","match_type":"REGEX","pattern":"return target .* card from (your|a) graveyard to your hand","priority":"251","rule_id":"RS_RECUR_DEST_HAND_FACET","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Recursion mode = return.","facet_key":"recursion_mode","facet_value":"RETURN","match_scope":"oracle_text","match_type":"REGEX","pattern":"return target .* card from (your|a) graveyard to your hand","priority":"252","rule_id":"RS_RECUR_MODE_RETURN","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.8","enabled":"true","explanation":"Casting from graveyard implied by wording.","facet_key":"cast_from_zone","facet_value":"GRAVEYARD","match_scope":"oracle_text","match_type":"REGEX","pattern":"you may cast .* from your graveyard","priority":"260","rule_id":"RS_CAST_FROM_GY_FACET","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.8","enabled":"true","explanation":"Recursion mode = cast (from graveyard).","facet_key":"recursion_mode","facet_value":"CAST","match_scope":"oracle_text","match_type":"REGEX","pattern":"you may cast .* from your graveyard","priority":"261","rule_id":"RS_CAST_FROM_GY_MODE_CAST","unknown_if_ambiguous":"true"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.75","enabled":"true","explanation":"Primitive: cast from graveyard (ensure exact primitive_id).","match_scope":"oracle_text","match_type":"REGEX","pattern":"you may cast .* from your graveyard","primitive_id":"CAST_FROM_GRAVEYARD","priority":"262","rule_id":"RS_CAST_FROM_GY_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Explicit additional cost sacrifice.","facet_key":"sacrifice_mode","facet_value":"COST","match_scope":"oracle_text","match_type":"REGEX","pattern":"as an additional cost to cast this spell, sacrifice","priority":"300","rule_id":"RS_SAC_AS_ADDITIONAL_COST","unknown_if_ambiguous":"false"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Colon template implies sacrifice as activation cost.","facet_key":"sacrifice_mode","facet_value":"COST","match_scope":"oracle_text","match_type":"REGEX","notes":"Regex broad; REVIEW/unknown to avoid false positives.","pattern":"Sacrifice .*:","priority":"301","rule_id":"RS_SAC_COLON_COST","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.7","enabled":"true","explanation":"Sentence-leading sacrifice is often an effect, not a cost; mark effect with REVIEW.","facet_key":"sacrifice_mode","facet_value":"EFFECT","match_scope":"oracle_text","match_type":"REGEX","pattern":"^Sacrifice (a|an|one|two|three|\\d+|target|another)","priority":"302","rule_id":"RS_SAC_EFFECT_WORDING","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Extra turn granted.","facet_key":"extra_turn","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"take an extra turn after this one","priority":"350","rule_id":"RS_EXTRA_TURN_FACET","unknown_if_ambiguous":"false"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Primitive: extra turn (ensure exact primitive_id).","match_scope":"oracle_text","match_type":"REGEX","pattern":"take an extra turn after this one","primitive_id":"EXTRA_TURN","priority":"351","rule_id":"RS_EXTRA_TURN_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Additional combat phase granted.","facet_key":"extra_combat","facet_value":"true","match_scope":"oracle_text","match_type":"REGEX","pattern":"additional combat phase|additional combat phases","priority":"360","rule_id":"RS_EXTRA_COMBAT_FACET","unknown_if_ambiguous":"false"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.85","enabled":"true","explanation":"Primitive: extra combat (ensure exact primitive_id).","match_scope":"oracle_text","match_type":"REGEX","pattern":"additional combat phase|additional combat phases","primitive_id":"EXTRA_COMBAT","priority":"361","rule_id":"RS_EXTRA_COMBAT_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Proliferate keyword.","facet_key":"proliferate","facet_value":"true","match_scope":"oracle_text","match_type":"CONTAINS","pattern":"proliferate","priority":"400","rule_id":"RS_PROLIFERATE_FACET","unknown_if_ambiguous":"false"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Primitive: proliferate (ensure exact primitive_id).","match_scope":"oracle_text","match_type":"CONTAINS","pattern":"proliferate","primitive_id":"PROLIFERATE","priority":"401","rule_id":"RS_PROLIFERATE_TAG","unknown_if_ambiguous":"true"},{"action_type":"ADD_FACET","case_sensitive":"false","confidence":"0.95","enabled":"true","explanation":"Populate keyword.","facet_key":"populate","facet_value":"true","match_scope":"oracle_text","match_type":"CONTAINS","pattern":"populate","priority":"410","rule_id":"RS_POPULATE_FACET","unknown_if_ambiguous":"false"},{"action_type":"ADD_TAG","case_sensitive":"false","confidence":"0.9","enabled":"true","explanation":"Primitive: populate (ensure exact primitive_id).","match_scope":"oracle_text","match_type":"CONTAINS","pattern":"populate","primitive_id":"POPULATE","priority":"411","rule_id":"RS_POPULATE_TAG","unknown_if_ambiguous":"true"}]